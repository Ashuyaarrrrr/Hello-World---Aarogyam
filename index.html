<!-- Paste this script at the bottom of your HTML, just before </body> -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector("#log form");
    const recommendationBox = document.querySelector("section.grid-cols-1.md\\:grid-cols-3 > div:nth-child(3) p");

    if (!form || !recommendationBox) {
      console.error("Form or Recommendation Box not found in the DOM.");
      return;
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const sleep = parseFloat(document.getElementById("sleep").value || "0");
      const water = parseFloat(document.getElementById("water").value || "0");
      const meals = document.getElementById("meals").value || "not specified";
      const exercise = parseFloat(document.getElementById("exercise").value || "0");

      const sugarBefore = parseFloat(document.getElementById("sugarBefore")?.value || "0");
      const sugarAfter = parseFloat(document.getElementById("sugarAfter")?.value || "0");
      const bpSystolic = parseFloat(document.getElementById("bpSystolic")?.value || "0");
      const bpDiastolic = parseFloat(document.getElementById("bpDiastolic")?.value || "0");

      let recommendations = [];

      // Sleep
      if (sleep < 6) {
        recommendations.push("• Try to get at least 6–8 hours of sleep.");
      } else if (sleep > 9) {
        recommendations.push("• Sleeping more than 9 hours may make you feel sluggish. Try to limit it.");
      } else {
        recommendations.push("• Your sleep duration looks good.");
      }

      // Water Intake
      if (water < 2) {
        recommendations.push("• Increase your water intake to at least 2L a day.");
      } else if (water > 4.5) {
        recommendations.push("• Too much water can strain kidneys. Limit to around 4L unless needed.");
      } else {
        recommendations.push("• Hydration level looks good.");
      }

      // Exercise
      if (exercise < 20) {
        recommendations.push("• Try to get at least 30 minutes of activity daily.");
      } else if (exercise > 90) {
        recommendations.push("• You might be overexerting yourself. Take adequate rest too.");
      } else {
        recommendations.push("• Good job staying active!");
      }

      // Blood Pressure (always show if data entered)
      if (bpSystolic > 0 && bpDiastolic > 0) {
        if (bpSystolic < 90 || bpSystolic > 120 || bpDiastolic < 60 || bpDiastolic > 80) {
          recommendations.push("• Your blood pressure is out of normal range. Monitor it closely.");
        } else {
          recommendations.push("• Your BP readings are within healthy limits.");
        }
      }

      // Sugar (only if goal is Diabetes Management)
      if (sugarBefore < 70 || sugarBefore > 130) {
          recommendations.push("• Fasting sugar is out of range. Watch your intake.");
        }
        if (sugarAfter < 70 || sugarAfter > 180) {
          recommendations.push("• Post-meal sugar should be between 70-180.");
        }
        if (
          sugarBefore >= 70 && sugarBefore <= 130 &&
          sugarAfter >= 70 && sugarAfter <= 180
        ) {
          recommendations.push("• Your sugar levels look fine. Maintain your routine.");
        }
      
      // Fallback
      if (recommendations.length === 0) {
        recommendations.push("• You're doing great! Maintain your healthy routine.");
      }

      recommendationBox.innerText =  recommendations.join("\n");
    });
  });
</script>